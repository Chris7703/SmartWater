<h1 class="page-header">{{pageTitle}}</h1>

<form method="post" name="formUser" id="formUser" ng-submit="add_new(user, board)" class="form-horizontal" role="form" novalidate>

   <div class="form-group"
    ng-class="{ 'has-error' : formUser.userCPF.$invalid && !formUser.userCPF.$pristine }">
      <label class="control-label col-sm-2" for="name">CPF:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" name="userCPF" maxlength="14"
         ng-model="user.cpf"
         ui-mask="999.999.999-99"
         ng-pattern="[0-9]{3}\.?[0-9]{3}\.?[0-9]{3}\-?[0-9]{2}"
         required />
        <p ng-show="formUser.userCPF.$invalid && !formUser.userCPF.$pristine" class="help-block">This field is required!</p>
      </div>
   </div>

   <div class="form-group"
    ng-class="{ 'has-error' : formUser.userName.$invalid && !formUser.userName.$pristine }">
      <label class="control-label col-sm-2" for="name">Name:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" name=userName
         ng-model="user.name"
         ng-minlength="6"
         placeholder="Enter Name" required />
        <p ng-show="formUser.userName.$invalid && !formUser.userName.$pristine" class="help-block">This field is required!</p>
      </div>
   </div>

   <div class="form-group"
    ng-class="{ 'has-error' : formUser.userAddress.$invalid && !formUser.userAddress.$pristine }">
      <label class="control-label col-sm-2" for="address">Address:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" name="userAddress"
         ng-model="user.address"
         ng-minlength="20"
         placeholder="Enter Address" required />
        <p ng-show="formUser.userAddress.$invalid && !formUser.userAddress.$pristine" class="help-block">This field is required!</p>
        <p ng-show="formUser.userAddress.$error.minlength" class="help-block">This address is invalid!</p>
      </div>
   </div>

   <div class="form-group"
    ng-class="{ 'has-error' : formUser.userCity.$invalid && !formUser.userCity.$pristine }">
      <label class="control-label col-sm-2" for="city">City:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" name="userCity"
         ng-model="user.city"
         ng-minlength="5"
         placeholder="Enter City" required />
        <p ng-show="formUser.userCity.$invalid && !formUser.userCity.$pristine" class="help-block">This field is required!</p>
        <p ng-show="formUser.userCity.$error.minlength" class="help-block">The city's name is invalid!</p>
      </div>
   </div>

   <div class="form-group" ng-class="{ 'has-error' : formUser.userState.$invalid && !formUser.userState.$pristine }">
     <label class="control-label col-sm-2" for="state_city">State:</label>
     <div class="col-sm-10">
       <input type="text" class="form-control" name="userState" maxlength="2"
        ng-model="user.state_city"
        ng-minlength="2"
        ng-maxlength="2"
        placeholder="Enter State" required />
       <p ng-show="formUser.userState.$invalid && !formUser.userState.$pristine" class="help-block">This field is required!</p>
       <p ng-show="formUser.userState.$error.minlength || formUser.userState.$error.maxlenght" class="help-block">Please insert the state code!</p>
     </div>
   </div>

   <div class="form-group" ng-class="{ 'has-error' : formUser.userCountry.$invalid && !formUser.userCountry.$pristine }">
     <label class="control-label col-sm-2" for="country">Country:</label>
     <div class="col-sm-10">
       <input type="text" class="form-control" name="userCountry"
        ng-model="user.country"
        ng-minlength="5"
        placeholder="Enter Country" required />
       <p ng-show="formUser.userCountry.$invalid && !formUser.userCountry.$pristine" class="help-block">This field is required!</p>
       <p ng-show="formUser.userCountry.$error.minlength" class="help-block">This country's name is invalid!</p>
    </div>
   </div>

   <div class="form-group">
      <label class="control-label col-sm-2" for="password">Password:</label>
      <div class="col-sm-10">
        <input type="password" class="form-control" ng-model="user.password"required />
      </div>
   </div>

   <div class="form-group">
      <label class="control-label col-sm-2" for="email">Email:</label>
      <div class="col-sm-10">
        <input type="email"  class="form-control"
        ng-model="user.email"
        ng-pattern="/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i"
        placeholder="user@domain.com" required />
      </div>
   </div>

   <div class="form-group">
      <label class="control-label col-sm-2" for="access_level">Access level:</label>
      <div class="col-sm-10">
        <select class="form-control" ng-model="user.access_level">
           <option ng-repeat="access_level in access_levels" value="{{access_level.id}}">{{access_level.description}}</option>
        </select>
      </div>
   </div>

   <div class="form-group"  ng-if="user.access_level == 2">
      <label class="control-label col-sm-2" for="residents_number">Residents number:</label>
      <div class="col-sm-10">
        <input type="number" class="form-control" ng-model="user.residents_number" required />
      </div>
   </div>

   <div class="form-group" ng-if="user.access_level == 2">
      <label class="control-label col-sm-2" for="mac_address">Mac address:</label>
      <div class="col-sm-10">
        <input type="text"  class="form-control" ng-model="board.mac_address" required />
      </div>
   </div>

   <button type="submit" class="btn btn-primary" ng-disabled="formUser.$invalid || isUnchanged(user)" id="add-new-btn">Save</button>
   <button type="reset" class="btn btn-default">Cancel</button>
</form>
</div>
